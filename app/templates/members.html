{% extends "base.html" %}
{% block content %}
<div class="flex items-center justify-between mb-4">
  <h2 class="section-title text-2xl md:text-3xl font-semibold">{{ t('Leden') }}</h2>
  <a href="{{ url_for('main.members_new') }}" class="btn btn-primary">{{ t('Nieuw lid') }}</a>
  </div>

<!-- Actieve leden -->
<div class="card table-card w-full p-4 mb-6">
  <h3 class="text-lg font-semibold mb-3">{{ t('Actieve leden') }} ({{ active_members|length }})</h3>
  <table class="w-full table-fixed text-left">
    <thead class="bg-gray-50">
      <tr>
        <th class="py-3 px-4">{{ t('Naam') }}</th>
        <th class="py-3 px-4">{{ t('E-mail') }}</th>
        <th class="py-3 px-4 w-28">{{ t('Telefoon') }}</th>
        <th class="py-3 px-4">{{ t('Adres') }}</th>
        <th class="py-3 px-4 w-36">{{ t('Laatste betaling') }}</th>
        <th class="py-3 px-4 w-28">{{ t('Status') }}</th>
        <th class="py-3 px-4 w-56 text-right">{{ t('Acties') }}</th>
      </tr>
    </thead>
    <tbody>
      {% for m in active_members %}
      <tr class="border-t">
        <td class="py-3 px-4 whitespace-nowrap font-medium">{{ m.first_name }} {{ m.last_name }}</td>
        <td class="py-3 px-4 break-words">{{ m.email or '-' }}</td>
        <td class="py-3 px-4">{{ m.phone or '-' }}</td>
        <td class="py-3 px-4 break-words">{{ m.address or '-' }}</td>
        <td class="py-3 px-4">
          {% if m.last_payment %}
            {{ m.last_payment.strftime('%Y-%m-%d') }}
          {% else %}
            <span class="text-orange-600">{{ t('No payment') }}</span>
          {% endif %}
        </td>
        <td class="py-3 px-4">
          <form method="POST" action="{{ url_for('main.members_status', member_id=m.member_id) }}" class="flex items-center gap-2">
            <span class="inline-block w-2.5 h-2.5 rounded-full bg-green-500"></span>
            <select name="status" class="border rounded p-1 text-sm h-9 w-auto">
              <option value="active" selected>{{ t('actief') }}</option>
              <option value="inactive">{{ t('inactief') }}</option>
            </select>
            <button class="icon-btn icon-btn-primary tooltip" aria-label="{{ t('Opslaan') }}" title="{{ t('Opslaan') }}" data-tooltip="{{ t('Opslaan') }}">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><path d="M17 21V13H7v8"/><path d="M7 3v5h8"/></svg>
            </button>
          </form>
        </td>
        <td class="py-3 px-4">
          <div class="actions-row">
            <a class="icon-btn tooltip" href="{{ url_for('main.members_children', member_id=m.member_id) }}" aria-label="{{ t('Kinderen') }}" title="{{ t('Kinderen') }}" data-tooltip="{{ t('Kinderen') }}">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.85"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
            </a>
            <a class="icon-btn tooltip" href="{{ url_for('main.members_payment', member_id=m.member_id) }}" aria-label="{{ t('Betaling') }}" title="{{ t('Betaling') }}" data-tooltip="{{ t('Betaling') }}">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="5" width="20" height="14" rx="2"/><line x1="2" y1="10" x2="22" y2="10"/><circle cx="7" cy="15" r="1"/><circle cx="11" cy="15" r="1"/></svg>
            </a>
            <a class="icon-btn icon-btn-primary tooltip" href="{{ url_for('main.members_edit', member_id=m.member_id) }}" aria-label="{{ t('Bewerken') }}" title="{{ t('Bewerken') }}" data-tooltip="{{ t('Bewerken') }}">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"/><path d="M16.5 3.5l4 4L7 21H3v-4L16.5 3.5z"/></svg>
            </a>
            <form method="POST" action="{{ url_for('main.members_delete', member_id=m.member_id) }}" onsubmit="return confirm('Lid verwijderen?');">
              <button class="icon-btn tooltip" data-tooltip="{{ t('Verwijderen') }}" aria-label="{{ t('Verwijderen') }}" title="{{ t('Verwijderen') }}">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M8 6V4h8v2"/><path d="M10 11v6"/><path d="M14 11v6"/><path d="M5 6l1 14a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2l1-14"/></svg>
              </button>
            </form>
          </div>
        </td>
      </tr>
      {% else %}
      <tr><td class="py-6 px-4 text-gray-600" colspan="7">{{ t('Geen leden in deze categorie.') }}</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<!-- Inactieve leden -->
<div class="card table-card w-full p-4">
  <h3 class="text-lg font-semibold mb-3">{{ t('Inactieve leden') }} ({{ inactive_members|length }})</h3>
  <table class="w-full table-fixed text-left">
    <thead class="bg-gray-50">
      <tr>
        <th class="py-3 px-4">{{ t('Naam') }}</th>
        <th class="py-3 px-4">{{ t('E-mail') }}</th>
        <th class="py-3 px-4 w-28">{{ t('Telefoon') }}</th>
        <th class="py-3 px-4">{{ t('Adres') }}</th>
        <th class="py-3 px-4 w-36">{{ t('Laatste betaling') }}</th>
        <th class="py-3 px-4 w-28">{{ t('Status') }}</th>
        <th class="py-3 px-4 w-56 text-right">{{ t('Acties') }}</th>
      </tr>
    </thead>
    <tbody>
      {% for m in inactive_members %}
      <tr class="border-t">
        <td class="py-3 px-4 whitespace-nowrap font-medium">{{ m.first_name }} {{ m.last_name }}</td>
        <td class="py-3 px-4 break-words">{{ m.email or '-' }}</td>
        <td class="py-3 px-4">{{ m.phone or '-' }}</td>
        <td class="py-3 px-4 break-words">{{ m.address or '-' }}</td>
        <td class="py-3 px-4">
          {% if m.last_payment %}
            {{ m.last_payment.strftime('%Y-%m-%d') }}
          {% else %}
            <span class="text-orange-600">{{ t('No payment') }}</span>
          {% endif %}
        </td>
        <td class="py-3 px-4">
          <form method="POST" action="{{ url_for('main.members_status', member_id=m.member_id) }}" class="flex items-center gap-2">
            <span class="inline-block w-2.5 h-2.5 rounded-full bg-red-500"></span>
            <select name="status" class="border rounded p-1 text-sm h-9 w-auto">
              <option value="active">{{ t('actief') }}</option>
              <option value="inactive" selected>{{ t('inactief') }}</option>
            </select>
            <button class="icon-btn icon-btn-primary tooltip" aria-label="{{ t('Opslaan') }}" title="{{ t('Opslaan') }}" data-tooltip="{{ t('Opslaan') }}">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><path d="M17 21V13H7v8"/><path d="M7 3v5h8"/></svg>
            </button>
          </form>
        </td>
        <td class="py-3 px-4">
          <div class="actions-row">
            <a class="icon-btn tooltip" href="{{ url_for('main.members_children', member_id=m.member_id) }}" aria-label="{{ t('Kinderen') }}" title="{{ t('Kinderen') }}" data-tooltip="{{ t('Kinderen') }}">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.85"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
            </a>
            <a class="icon-btn tooltip" href="{{ url_for('main.members_payment', member_id=m.member_id) }}" aria-label="{{ t('Betaling') }}" title="{{ t('Betaling') }}" data-tooltip="{{ t('Betaling') }}">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="5" width="20" height="14" rx="2"/><line x1="2" y1="10" x2="22" y2="10"/><circle cx="7" cy="15" r="1"/><circle cx="11" cy="15" r="1"/></svg>
            </a>
            <a class="icon-btn icon-btn-primary tooltip" href="{{ url_for('main.members_edit', member_id=m.member_id) }}" aria-label="{{ t('Bewerken') }}" title="{{ t('Bewerken') }}" data-tooltip="{{ t('Bewerken') }}">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"/><path d="M16.5 3.5l4 4L7 21H3v-4L16.5 3.5z"/></svg>
            </a>
            <form method="POST" action="{{ url_for('main.members_delete', member_id=m.member_id) }}" onsubmit="return confirm('Lid verwijderen?');">
              <button class="icon-btn tooltip" data-tooltip="{{ t('Verwijderen') }}" aria-label="{{ t('Verwijderen') }}" title="{{ t('Verwijderen') }}">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M8 6V4h8v2"/><path d="M10 11v6"/><path d="M14 11v6"/><path d="M5 6l1 14a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2l1-14"/></svg>
              </button>
            </form>
          </div>
        </td>
      </tr>
      {% else %}
      <tr><td class="py-6 px-4 text-gray-600" colspan="7">{{ t('Geen leden in deze categorie.') }}</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
